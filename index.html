<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfect Drive | Location Premium</title>
    <link rel="icon" href="Perfect drive.jpeg" type="image/jpeg">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;600;700&family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        alpine: '#0051ff',
                        darkbg: '#070b13',
                    },
                    fontFamily: {
                        oswald: ['Oswald', 'sans-serif'],
                        montserrat: ['Montserrat', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        html { scroll-behavior: smooth; }
        body { background-color: #070b13; color: white; font-family: 'Montserrat', sans-serif; overflow-x: hidden; }
        
        .glass-panel {
            background: rgba(20, 20, 20, 0.75);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transform: translateZ(0); 
        }
        
        .glass-input {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: white; transition: all 0.3s ease;
        }
        
        select { background-color: #0a0a0a !important; color: white !important; border: 1px solid rgba(255, 255, 255, 0.1); }
        select:focus { border-color: #0051ff !important; background-color: #000 !important; outline: none; box-shadow: 0 0 15px rgba(0, 81, 255, 0.3); }
        select option { background-color: #000000; color: white; padding: 10px; }
        select.glass-input { appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 1em; }
        
        input[type="time"]::-webkit-calendar-picker-indicator { filter: invert(1); cursor: pointer; }

        .alpine-btn { background: white; color: black; font-family: 'Oswald', sans-serif; text-transform: uppercase; letter-spacing: 2px; transition: all 0.3s ease; }
        .alpine-btn:hover { background: #0051ff; color: white; box-shadow: 0 0 30px rgba(0, 81, 255, 0.4); }

        .price-table { width: 100%; border-collapse: collapse; font-size: 0.8rem; color: #aaa; }
        .price-table th { text-align: left; padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.1); color: #fff; font-family: 'Oswald'; font-weight: normal; letter-spacing: 1px; }
        .price-table td { padding: 8px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .price-table tr:last-child td { border-bottom: none; }

        .day-box { transition: all 0.2s ease; }
        .selected-limit { background-color: #0051ff !important; color: white !important; box-shadow: 0 0 15px rgba(0, 81, 255, 0.6); border: 1px solid #3b82f6; font-weight: bold; }
        .selected-range { background-color: rgba(0, 81, 255, 0.25) !important; color: #bfdbfe !important; border: 1px solid rgba(0, 81, 255, 0.3); }
        .past-date { opacity: 0.3; cursor: not-allowed !important; background: transparent !important; border: none !important; color: #666 !important; }
        .reserved-date { background-color: rgba(220, 38, 38, 0.15) !important; color: #ef4444 !important; border: 1px solid rgba(220, 38, 38, 0.3) !important; cursor: not-allowed !important; text-decoration: line-through; }
        
        /* Classe d'erreur pour les fichiers manquants */
        .border-error { border-color: #ef4444 !important; background-color: rgba(239, 68, 68, 0.1) !important; }

        #carouselTrack div:first-child img { object-position: center bottom !important; }
        .animate-fade-in { animation: fadeInUp 0.8s ease-out forwards; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="selection:bg-alpine selection:text-white">

    <header class="fixed w-full z-50 glass-panel border-b-0 top-0">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="w-20 h-auto flex items-center justify-center">
                    <img src="Perfect drive.jpeg" alt="Logo" class="w-full h-full object-contain mix-blend-screen filter brightness-125">
                </div>
                <div class="flex flex-col justify-center">
                    <h1 class="font-oswald text-2xl font-bold tracking-widest text-white uppercase leading-none mb-1">PERFECT DRIVE</h1>
                    <p class="font-montserrat text-[10px] font-bold text-alpine tracking-[0.3em] uppercase leading-none">LOCATION PREMIUM</p>
                </div>
            </div>
            
            <div class="hidden md:flex gap-8 font-oswald text-sm tracking-widest text-gray-300 items-center">
                <a href="#showroom" class="hover:text-alpine transition duration-300">V√âHICULES</a>
                <a href="#booking" class="hover:text-alpine transition duration-300">AGENCE</a>
                
                <div class="relative group">
                    <button class="hover:text-alpine transition duration-300 flex items-center gap-1 py-4">CONTACT <i data-lucide="chevron-down" class="w-3 h-3 group-hover:rotate-180 transition-transform"></i></button>
                    <div class="absolute right-0 top-full w-72 glass-panel rounded-xl p-2 hidden group-hover:block animate-fade-in border border-white/10 shadow-2xl">
                        <a href="https://wa.me/33762711498" target="_blank" class="flex items-center gap-4 p-3 hover:bg-white/10 rounded-lg transition group/item">
                            <div class="w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center text-green-500 group-hover/item:bg-green-500 group-hover/item:text-white transition"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/></svg></div><div class="flex flex-col"><span class="font-bold text-white text-xs font-montserrat">WhatsApp</span><span class="text-[10px] text-gray-400 font-montserrat">07 62 71 14 98</span></div></a>
                        <a href="mailto:contact.perfectdrive@gmail.com" class="flex items-center gap-4 p-3 hover:bg-white/10 rounded-lg transition group/item"><div class="w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-500 group-hover/item:bg-blue-500 group-hover/item:text-white transition"><i data-lucide="mail" class="w-4 h-4"></i></div><div class="flex flex-col"><span class="font-bold text-white text-xs font-montserrat">Email</span><span class="text-[10px] text-gray-400 font-montserrat">contact...</span></div></a>
                        <a href="https://www.snapchat.com/add/perfectdrivee" target="_blank" class="flex items-center gap-4 p-3 hover:bg-white/10 rounded-lg transition group/item"><div class="w-8 h-8 rounded-full bg-yellow-400/20 flex items-center justify-center text-yellow-400 group-hover/item:bg-yellow-400 group-hover/item:text-black transition"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M15.943 11.526c-.111-.303-.323-.465-.564-.599a1.416 1.416 0 0 0-.123-.064l-.023-.011-2.46-.967a.38.38 0 0 1-.22-.447l.045-.23c.307-1.579.362-2.318.362-2.67 0-3.322-2.327-4.478-4.88-4.478-2.617 0-4.957 1.2-4.957 4.478 0 .351.055 1.09.362 2.669l.046.23a.383.383 0 0 1-.22.447l-2.462.967-.022.01c-.04.022-.083.044-.124.065-.24.133-.452.295-.563.598-.12.327-.068.746.262 1.066.27.262.65.37 1.033.37.195 0 .393-.028.58-.085l.173-.05.163-.047c.72-.206 1.63-.466 2.376-.466.575 0 1.13.155 1.554.437.388.258.742.65 1.346.65.6 0 .956-.391 1.345-.65.424-.28.98-.436 1.554-.436.746 0 1.656.26 2.377.466l.163.047.172.05c.188.057.386.085.581.085.383 0 .764-.108 1.034-.37.33-.32.381-.74.262-1.066z"/></svg></div><div class="flex flex-col"><span class="font-bold text-white text-xs font-montserrat">Snapchat</span><span class="text-[10px] text-gray-400 font-montserrat">@perfectdrivee</span></div></a>
                        <a href="https://www.instagram.com/perfectdrive10" target="_blank" class="flex items-center gap-4 p-3 hover:bg-white/10 rounded-lg transition group/item"><div class="w-8 h-8 rounded-full bg-pink-500/20 flex items-center justify-center text-pink-500 group-hover/item:bg-pink-500 group-hover/item:text-white transition"><i data-lucide="instagram" class="w-4 h-4"></i></div><div class="flex flex-col"><span class="font-bold text-white text-xs font-montserrat">Instagram</span><span class="text-[10px] text-gray-400 font-montserrat">@perfectdrive10</span></div></a>
                        <a href="https://www.tiktok.com/@rayandrv" target="_blank" class="flex items-center gap-4 p-3 hover:bg-white/10 rounded-lg transition group/item"><div class="w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-white group-hover/item:bg-white group-hover/item:text-black transition"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M9 0h1.98c.144.715.54 1.617 1.235 2.512C12.895 3.389 13.797 4 15 4v2c-1.753 0-3.07-.814-4-1.829V11a5 5 0 1 1-5-5v2a3 3 0 1 0 3 3V0Z"/></svg></div><div class="flex flex-col"><span class="font-bold text-white text-xs font-montserrat">TikTok</span><span class="text-[10px] text-gray-400 font-montserrat">@rayandrv</span></div></a>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div id="showroom" class="relative pt-32 pb-10 px-6 overflow-hidden">
        <div class="absolute top-0 right-0 w-2/3 h-full bg-gradient-to-l from-blue-900/20 to-transparent pointer-events-none"></div>
        <div class="max-w-7xl mx-auto grid lg:grid-cols-2 gap-12 items-center">
            <div class="z-10 animate-fade-in">
                <div class="inline-block px-3 py-1 border border-blue-500/30 bg-blue-500/10 rounded mb-6">
                    <span class="text-blue-400 text-xs font-bold tracking-widest font-oswald">FLOTTE 2026</span>
                </div>
                <h2 class="font-oswald text-5xl md:text-7xl font-bold uppercase leading-[0.9] mb-6 text-white">Clio V <br/><span class="text-alpine">Esprit Alpine</span></h2>
                <p class="font-montserrat text-gray-400 text-lg max-w-md leading-relaxed mb-8 border-l-2 border-alpine pl-4">Finition Black Edition. Hybride E-Tech 145ch. <br>L'√©l√©gance radicale.</p>
            </div>
            <div class="relative group animate-fade-in z-20" style="animation-delay: 0.2s;">
                <div class="relative rounded-xl overflow-hidden shadow-2xl border border-white/10 aspect-[4/3] md:aspect-[16/10]">
                    <div id="carouselTrack" class="flex transition-transform duration-700 ease-in-out h-full"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-60 pointer-events-none"></div>
                    <div class="absolute bottom-6 left-6 z-20 pointer-events-none"><p class="font-oswald text-white text-xl uppercase tracking-widest drop-shadow-md">Noir √âtoil√©</p><p class="text-alpine text-xs font-bold uppercase tracking-wider mt-1">Perfect Drive Edition</p></div>
                    <button onclick="prevSlide()" class="absolute left-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 hover:bg-alpine/80 rounded-full text-white transition opacity-0 group-hover:opacity-100 z-30"><i data-lucide="chevron-left"></i></button>
                    <button onclick="nextSlide()" class="absolute right-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 hover:bg-alpine/80 rounded-full text-white transition opacity-0 group-hover:opacity-100 z-30"><i data-lucide="chevron-right"></i></button>
                    <div id="carouselIndicators" class="absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-30"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="booking" class="max-w-7xl mx-auto px-6 pb-20">
        <div class="grid lg:grid-cols-12 gap-8">
            <div class="lg:col-span-7 space-y-8">
                <div class="glass-panel p-6 md:p-8 rounded-2xl animate-fade-in" style="animation-delay: 0.3s;">
                    <div class="flex justify-between items-end mb-8">
                        <h3 class="font-oswald text-xl text-alpine tracking-[0.2em] uppercase flex items-center gap-3"><span class="text-3xl font-bold text-white/20">01.</span> Disponibilit√©s</h3>
                        <div class="flex gap-2">
                            <button onclick="changeMonth(-1)" class="p-2 bg-white/5 hover:bg-white/10 rounded-lg transition"><i data-lucide="chevron-left" class="w-5 h-5"></i></button>
                            <span id="currentMonthDisplay" class="font-oswald text-lg capitalize py-1 px-3 min-w-[140px] text-center">...</span>
                            <button onclick="changeMonth(1)" class="p-2 bg-white/5 hover:bg-white/10 rounded-lg transition"><i data-lucide="chevron-right" class="w-5 h-5"></i></button>
                        </div>
                    </div>
                    <div class="grid grid-cols-7 gap-2 mb-2 text-center text-[10px] font-bold text-alpine uppercase"><div>Lun</div><div>Mar</div><div>Mer</div><div>Jeu</div><div>Ven</div><div>Sam</div><div>Dim</div></div>
                    <div id="calendarGrid" class="grid grid-cols-7 gap-2"></div>
                    <div class="flex justify-center gap-6 mt-6 text-[10px] uppercase tracking-widest font-oswald text-gray-400">
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded bg-white/10 border border-white/20"></div><span>Disponible</span></div>
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded bg-alpine border border-blue-500 shadow-[0_0_8px_rgba(0,81,255,0.6)]"></div><span class="text-white">Votre S√©lection</span></div>
                        <div class="flex items-center gap-2"><div class="w-3 h-3 rounded bg-red-500/20 border border-red-500/50"></div><span class="text-red-400">R√©serv√©</span></div>
                    </div>
                </div>

                <div class="glass-panel p-6 rounded-2xl animate-fade-in" style="animation-delay: 0.35s;">
                    <h3 class="font-oswald text-xl text-alpine mb-4 tracking-[0.2em] uppercase flex items-center gap-3"><span class="text-3xl font-bold text-white/20">01.5</span> Horaires</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div><label class="block text-[10px] uppercase font-bold text-gray-500 tracking-widest mb-2">Heure D√©part</label><input type="time" id="timeStart" required step="900" class="w-full p-3 glass-input rounded-lg text-white font-montserrat" onchange="updateTime('start', this.value)"></div>
                        <div><label class="block text-[10px] uppercase font-bold text-gray-500 tracking-widest mb-2">Heure Retour</label><input type="time" id="timeEnd" required step="900" class="w-full p-3 glass-input rounded-lg text-white font-montserrat" onchange="updateTime('end', this.value)"></div>
                    </div>
                </div>

                <div class="glass-panel p-6 rounded-xl animate-fade-in" style="animation-delay: 0.4s;">
                    <h3 class="font-oswald text-xl text-alpine mb-4 tracking-[0.2em] uppercase flex items-center gap-3"><span class="text-3xl font-bold text-white/20">INFO</span> Tarifs</h3>
                    <table class="price-table">
                        <thead><tr><th>Dur√©e</th><th>Standard</th><th>Illimit√©</th></tr></thead>
                        <tbody>
                            <tr><td>Journ√©e (Lun-Ven)</td><td>60‚Ç¨ <span class="text-gray-500 text-[10px]">(150km)</span></td><td class="text-white">90‚Ç¨</td></tr>
                            <tr><td>Week-end (48h)</td><td>150‚Ç¨ <span class="text-gray-500 text-[10px]">(350km)</span></td><td class="text-white">200‚Ç¨</td></tr>
                            <tr><td>Week-end (72h)</td><td>200‚Ç¨ <span class="text-gray-500 text-[10px]">(400km)</span></td><td class="text-white">280‚Ç¨</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="lg:col-span-5 flex flex-col gap-6 animate-fade-in" style="animation-delay: 0.5s;">
                <div id="dateSummary" class="hidden bg-gradient-to-r from-blue-900/50 to-blue-600/20 border border-blue-500/30 p-6 rounded-xl">
                    <p class="font-oswald text-blue-300 text-sm uppercase tracking-widest mb-3">P√©riode choisie</p>
                    <div class="flex justify-between items-center mb-2">
                        <div><p class="text-[10px] text-gray-400 uppercase tracking-wider mb-1">D√©part</p><div class="flex items-baseline gap-2"><span id="summaryStart" class="text-xl font-bold font-montserrat text-white">--/--</span><span id="summaryStartTime" class="text-sm text-alpine font-bold">--:--</span></div></div>
                        <i data-lucide="arrow-right" class="text-gray-500"></i>
                        <div class="text-right"><p class="text-[10px] text-gray-400 uppercase tracking-wider mb-1">Retour</p><div class="flex items-baseline gap-2 justify-end"><span id="summaryEndTime" class="text-sm text-alpine font-bold">--:--</span><span id="summaryEnd" class="text-xl font-bold font-montserrat text-white">--/--</span></div></div>
                    </div>
                </div>

                <div class="glass-panel p-6 rounded-2xl flex flex-col gap-4">
                    <h3 class="font-oswald text-xl text-alpine tracking-[0.2em] uppercase flex items-center gap-3"><span class="text-3xl font-bold text-white/20">02.</span> Option</h3>
                    <div>
                        <label class="block text-sm font-oswald uppercase tracking-widest mb-2 text-gray-400">Kilom√©trage</label>
                        <select id="mileageSelect" class="w-full p-4 glass-input rounded-lg font-montserrat text-white cursor-pointer" onchange="calculatePrice()">
                            <option value="standard">Standard</option>
                            <option value="unlimited">Illimit√©</option>
                        </select>
                    </div>
                    <div class="mt-4 p-4 border border-blue-500/20 bg-blue-500/5 rounded-xl text-center relative overflow-hidden transition-all duration-300">
                        <div class="absolute top-0 left-0 w-1 h-full bg-alpine"></div>
                        <p id="priceLabel" class="text-[10px] text-gray-400 uppercase tracking-widest mb-1">Prix par Jour (Semaine)</p>
                        <div class="font-oswald text-4xl font-bold text-white" id="displayPrice">60‚Ç¨</div>
                        <div class="text-xs font-bold text-gray-400 uppercase tracking-wider mt-1" id="displayKm">Inclus : 150 km</div>
                        <div id="alertBox" class="hidden mt-2 text-xs text-red-400 font-bold bg-red-500/10 p-1 rounded"></div>
                    </div>
                </div>

                <div class="glass-panel p-6 md:p-8 rounded-2xl">
                    <h3 class="font-oswald text-xl text-alpine mb-8 tracking-[0.2em] uppercase flex items-center gap-3"><span class="text-3xl font-bold text-white/20">03.</span> Documents</h3>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="relative group"><input type="file" id="fileIdCard" class="hidden" onchange="updateFileBox('fileIdCard', 'labelIdCard')"><label id="labelIdCard" for="fileIdCard" class="flex flex-col items-center justify-center p-4 border-2 border-dashed border-white/10 hover:border-alpine hover:bg-alpine/5 rounded-xl cursor-pointer transition-all h-full min-h-[100px]"><i data-lucide="id-card" class="text-gray-400 mb-2 w-5 h-5"></i><span class="font-oswald text-[10px] uppercase tracking-wider text-gray-300">Identit√©</span></label></div>
                        <div class="relative group"><input type="file" id="fileLicense" class="hidden" onchange="updateFileBox('fileLicense', 'labelLicense')"><label id="labelLicense" for="fileLicense" class="flex flex-col items-center justify-center p-4 border-2 border-dashed border-white/10 hover:border-alpine hover:bg-alpine/5 rounded-xl cursor-pointer transition-all h-full min-h-[100px]"><i data-lucide="car" class="text-gray-400 mb-2 w-5 h-5"></i><span class="font-oswald text-[10px] uppercase tracking-wider text-gray-300">Permis</span></label></div>
                        <div class="relative group col-span-2"><input type="file" id="fileProof" class="hidden" onchange="updateFileBox('fileProof', 'labelProof')"><label id="labelProof" for="fileProof" class="flex flex-col items-center justify-center p-4 border-2 border-dashed border-white/10 hover:border-alpine hover:bg-alpine/5 rounded-xl cursor-pointer transition-all h-full min-h-[80px]"><i data-lucide="home" class="text-gray-400 mb-2 w-5 h-5"></i><span class="font-oswald text-[10px] uppercase tracking-wider text-gray-300">Justificatif Domicile (-3 mois)</span></label></div>
                    </div>
                </div>

                <div class="glass-panel p-6 md:p-8 rounded-2xl flex-1 flex flex-col">
                    <h3 class="font-oswald text-xl text-alpine mb-8 tracking-[0.2em] uppercase flex items-center gap-3"><span class="text-3xl font-bold text-white/20">04.</span> Confirmation</h3>
                    <form onsubmit="handleBooking(event)" class="space-y-6 font-montserrat flex-1">
                        <div class="grid grid-cols-2 gap-4">
                            <input type="text" id="firstname" required class="w-full p-4 glass-input rounded-lg" placeholder="PR√âNOM">
                            <input type="text" id="lastname" required class="w-full p-4 glass-input rounded-lg" placeholder="NOM">
                        </div>
                        <input type="email" id="email" required class="w-full p-4 glass-input rounded-lg" placeholder="EMAIL">
                        <input type="tel" id="phone" required class="w-full p-4 glass-input rounded-lg" placeholder="T√âL√âPHONE">
                        <textarea id="message" rows="3" class="w-full p-4 glass-input rounded-lg font-montserrat" placeholder="MESSAGE (OPTIONNEL)"></textarea>

                        <div class="space-y-3 p-4 rounded-lg bg-white/5 border border-white/10">
                            <p class="text-[10px] text-gray-400 font-oswald uppercase tracking-widest mb-2">Moyen de contact souhait√©</p>
                            <label class="flex items-center gap-3 cursor-pointer group"><input type="checkbox" id="checkPhone" checked class="hidden peer" onchange="checkAllLogic()"><div class="w-4 h-4 border border-white/30 rounded bg-transparent peer-checked:bg-alpine peer-checked:border-alpine flex items-center justify-center transition"><i data-lucide="check" class="w-3 h-3 text-white opacity-0 peer-checked:opacity-100"></i></div><span class="text-xs text-gray-300 group-hover:text-white transition">Via T√©l√©phone / WhatsApp</span></label>
                            <label class="flex items-center gap-3 cursor-pointer group"><input type="checkbox" id="checkMail" class="hidden peer" onchange="checkAllLogic()"><div class="w-4 h-4 border border-white/30 rounded bg-transparent peer-checked:bg-alpine peer-checked:border-alpine flex items-center justify-center transition"><i data-lucide="check" class="w-3 h-3 text-white opacity-0 peer-checked:opacity-100"></i></div><span class="text-xs text-gray-300 group-hover:text-white transition">Via Email</span></label>
                            <label class="flex items-center gap-3 cursor-pointer group"><input type="checkbox" id="checkAll" class="hidden peer" onchange="toggleAll(this)"><div class="w-4 h-4 border border-white/30 rounded bg-transparent peer-checked:bg-white peer-checked:border-white flex items-center justify-center transition"><i data-lucide="check" class="w-3 h-3 text-black opacity-0 peer-checked:opacity-100"></i></div><span class="text-xs text-white font-bold group-hover:text-gray-200 transition">Tout accepter</span></label>
                        </div>

                        <div class="pt-2 border-t border-white/10 mt-auto text-center">
                            <button type="submit" id="submitBtn" class="w-full py-4 mb-3 alpine-btn font-bold text-lg rounded cursor-pointer">CONFIRMER MA DEMANDE</button>
                            <p class="text-[10px] text-gray-500 italic">Vos demandes sont trait√©es dans les plus brefs d√©lais. Vous recevrez une r√©ponse (favorable ou non) selon le mode de contact choisi.</p>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="mt-12 mb-20 text-center space-y-4 animate-fade-in px-4">
            <div class="inline-block p-6 glass-panel rounded-2xl border border-white/10 max-w-2xl w-full">
                <p class="text-gray-300 font-montserrat text-sm mb-6">Pour toute autre demande particuli√®re ou sp√©cifique (longue dur√©e, shooting, √©v√©nement),<br class="hidden md:block">veuillez nous contacter directement.</p>
                <a href="https://wa.me/33762711498" target="_blank" class="inline-flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-500 text-white rounded-lg font-oswald tracking-wider transition uppercase text-sm font-bold shadow-lg shadow-green-900/20"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/></svg> Contacter sur WhatsApp</a>
            </div>
            <p class="text-[10px] text-gray-500 uppercase tracking-widest mt-8">¬© 2026 Perfect Drive - Location Premium</p>
        </div>
    </div>

    <script>
        const bookedRanges = []; 
        let currentViewDate = new Date(); 
        let selectedStart = null; 
        let selectedEnd = null;
        let selectedStartTime = null; 
        let selectedEndTime = null;
        const monthNames = ["Janvier", "F√©vrier", "Mars", "Avril", "Mai", "Juin", "Juillet", "Ao√ªt", "Septembre", "Octobre", "Novembre", "D√©cembre"];
        
        const carouselImages = [ 'voiture1.jpeg', 'voiture2.JPG', 'voiture3.JPG', 'voiture4.JPG' ];
        let currentSlide = 0; let slideInterval;

        function init() { initAutoTime(); renderCalendar(); initCarousel(); calculatePrice(); lucide.createIcons(); }

        function calculatePrice() {
            const mileage = document.getElementById('mileageSelect').value;
            const isUnlimited = (mileage === 'unlimited');
            const alertBox = document.getElementById('alertBox');
            const submitBtn = document.getElementById('submitBtn');
            alertBox.classList.add('hidden'); submitBtn.disabled = false; submitBtn.style.opacity = "1"; submitBtn.style.cursor = "pointer";

            let days = 0; let isWeekendBooking = false; let endIsSaturday = false;
            if (selectedStart && selectedEnd) {
                const start = new Date(selectedStart); const end = new Date(selectedEnd);
                days = Math.ceil(Math.abs(end - start) / (1000 * 60 * 60 * 24));
                if (end.getDay() === 6) endIsSaturday = true;
                let checkDate = new Date(start);
                while (checkDate <= end) { if (checkDate.getDay() === 0 || checkDate.getDay() === 6) isWeekendBooking = true; checkDate.setDate(checkDate.getDate() + 1); }
            }

            let finalPrice = 0; let kmText = ""; let labelText = "Prix Standard 24h";
            if (days === 0) {
                finalPrice = isUnlimited ? 90 : 60; kmText = isUnlimited ? "Kilom√©trage Illimit√© üî•" : "Inclus : 150 km";
            } else {
                labelText = `TOTAL POUR ${days} JOURS`;
                if (endIsSaturday) { finalPrice = "--"; kmText = "Non autoris√©"; labelText = "Date de retour invalide"; alertBox.innerText = "‚õî Retour impossible le samedi. Veuillez inclure le week-end (Retour Lundi)."; alertBox.classList.remove('hidden'); submitBtn.disabled = true; submitBtn.style.opacity = "0.5"; submitBtn.style.cursor = "not-allowed"; }
                else if (isWeekendBooking) {
                    const start = new Date(selectedStart);
                    if (days < 2) { 
                        finalPrice = "--"; kmText = "Indisponible"; labelText = "Dur√©e invalide"; 
                        if(start.getDay() === 0) alertBox.innerText = "‚õî Pas de location 24h le dimanche.";
                        else alertBox.innerText = "‚ö†Ô∏è Minimum 48h le week-end";
                        alertBox.classList.remove('hidden'); submitBtn.disabled = true; submitBtn.style.opacity = "0.5"; submitBtn.style.cursor = "not-allowed"; 
                    } 
                    else if (days === 2) { finalPrice = isUnlimited ? 200 : 150; kmText = isUnlimited ? "Illimit√©" : "350 km"; }
                    else if (days === 3) { finalPrice = isUnlimited ? 280 : 200; kmText = isUnlimited ? "Illimit√©" : "400 km"; }
                    else { const rate = isUnlimited ? 95 : 70; finalPrice = days * rate; kmText = isUnlimited ? "Illimit√©" : `${days * 150} km`; }
                } else {
                    if (days === 5) { finalPrice = isUnlimited ? 350 : 250; kmText = isUnlimited ? "Illimit√© üî•" : "700 km"; labelText = "FORFAIT SEMAINE (5J)"; }
                    else { const rate = isUnlimited ? 90 : 60; finalPrice = days * rate; kmText = isUnlimited ? "Illimit√©" : `${days * 150} km`; }
                }
            }
            document.getElementById('displayPrice').innerText = (finalPrice === "--") ? "--" : finalPrice + "‚Ç¨";
            document.getElementById('displayKm').innerText = kmText; document.getElementById('priceLabel').innerText = labelText;
            const kmEl = document.getElementById('displayKm');
            if (isUnlimited) { kmEl.classList.remove('text-gray-400'); kmEl.classList.add('text-alpine'); } else { kmEl.classList.remove('text-alpine'); kmEl.classList.add('text-gray-400'); }
        }

        function toggleAll(source) {
            document.getElementById('checkPhone').checked = source.checked;
            document.getElementById('checkMail').checked = source.checked;
        }
        function checkAllLogic() {
            const p = document.getElementById('checkPhone').checked;
            const m = document.getElementById('checkMail').checked;
            document.getElementById('checkAll').checked = (p && m);
        }

        function initAutoTime() {
            const now = new Date(); let h = now.getHours(), m = now.getMinutes();
            if (m % 15 !== 0) m += (15 - m % 15); if (m >= 60) { m = 0; h++; } if (h >= 24) h = 0;
            const time = `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`;
            
            document.getElementById('timeStart').value = time; 
            document.getElementById('timeEnd').value = time;
            selectedStartTime = time; 
            selectedEndTime = time;
            
            document.getElementById('summaryStartTime').innerText = time;
            document.getElementById('summaryEndTime').innerText = time;
        }

        function initCarousel() {
            const track = document.getElementById('carouselTrack');
            carouselImages.forEach((src) => {
                const d = document.createElement('div'); d.className = "w-full h-full flex-shrink-0";
                d.innerHTML = `<img src="${src}" class="w-full h-full object-cover">`; track.appendChild(d);
            });
            startSlideTimer();
        }
        function updateCarousel() { document.getElementById('carouselTrack').style.transform = `translateX(-${currentSlide * 100}%)`; }
        function nextSlide() { currentSlide = (currentSlide + 1) % carouselImages.length; updateCarousel(); resetSlideTimer(); }
        function prevSlide() { currentSlide = (currentSlide - 1 + carouselImages.length) % carouselImages.length; updateCarousel(); resetSlideTimer(); }
        function startSlideTimer() { slideInterval = setInterval(nextSlide, 5000); }
        function resetSlideTimer() { clearInterval(slideInterval); startSlideTimer(); }

        function renderCalendar() {
            const grid = document.getElementById('calendarGrid'); grid.innerHTML = '';
            document.getElementById('currentMonthDisplay').textContent = `${monthNames[currentViewDate.getMonth()]} ${currentViewDate.getFullYear()}`;
            const year = currentViewDate.getFullYear(), month = currentViewDate.getMonth();
            const firstDay = new Date(year, month, 1).getDay(), padding = firstDay === 0 ? 6 : firstDay - 1;
            const daysInMonth = new Date(year, month + 1, 0).getDate(); const today = new Date(); today.setHours(0,0,0,0);

            for(let i=0; i<padding; i++) grid.appendChild(document.createElement('div'));
            for(let i=1; i<=daysInMonth; i++) {
                const d = document.createElement('div'); d.textContent = i;
                const dateStr = `${year}-${String(month+1).padStart(2,'0')}-${String(i).padStart(2,'0')}`;
                const cellDate = new Date(year, month, i);
                
                if (cellDate < today) d.className = "day-box aspect-square flex items-center justify-center rounded-lg font-montserrat text-sm font-medium past-date";
                else if (bookedRanges.includes(i)) d.className = "day-box aspect-square flex items-center justify-center rounded-lg font-montserrat text-sm font-medium reserved-date";
                else {
                    let cls = "day-box aspect-square flex items-center justify-center rounded-lg font-montserrat text-sm font-medium border border-white/5 bg-white/5 cursor-pointer hover:bg-white/10";
                    if (dateStr === selectedStart || dateStr === selectedEnd) cls += " selected-limit";
                    else if (selectedStart && selectedEnd && dateStr > selectedStart && dateStr < selectedEnd) cls += " selected-range";
                    d.className = cls; d.onclick = () => selectDate(dateStr);
                }
                grid.appendChild(d);
            }
        }
        function selectDate(d) {
            if (!selectedStart || (selectedStart && selectedEnd)) { selectedStart = d; selectedEnd = null; }
            else { if (d < selectedStart) { selectedEnd = selectedStart; selectedStart = d; } else { selectedEnd = d; } }
            renderCalendar(); const box = document.getElementById('dateSummary');
            if(selectedStart) { box.classList.remove('hidden'); const p = selectedStart.split('-'); document.getElementById('summaryStart').textContent = `${p[2]}/${p[1]}`; }
            if(selectedEnd) { const p = selectedEnd.split('-'); document.getElementById('summaryEnd').textContent = `${p[2]}/${p[1]}`; }
            calculatePrice();
        }
        function changeMonth(d) { currentViewDate.setMonth(currentViewDate.getMonth() + d); renderCalendar(); }
        
        function updateTime(t, v) { 
            if(t==='start') {
                selectedStartTime = v;
                document.getElementById('summaryStartTime').innerText = v;
            } else {
                selectedEndTime = v;
                document.getElementById('summaryEndTime').innerText = v;
            } 
            calculatePrice(); 
        }

        function updateFileBox(id, lbl) { 
            const l = document.getElementById(lbl);
            if(document.getElementById(id).files[0]) { 
                l.classList.remove('border-error'); // Enl√®ve le rouge si pr√©sent
                l.classList.add('border-green-500', 'bg-green-500/10'); 
                l.querySelector('i').style.color = '#4ade80';
            } 
        }

        function handleBooking(e) {
            e.preventDefault(); 
            
            if(!selectedStart || !selectedEnd) {
                const alertBox = document.getElementById('alertBox');
                alertBox.innerText = "‚ö†Ô∏è Veuillez s√©lectionner vos dates sur le calendrier.";
                alertBox.classList.remove('hidden');
                document.getElementById('booking').scrollIntoView();
                return;
            }

            // --- V√âRIFICATION STRICTE DES DOCUMENTS ---
            const idCard = document.getElementById('fileIdCard').files.length > 0;
            const license = document.getElementById('fileLicense').files.length > 0;
            const proof = document.getElementById('fileProof').files.length > 0;
            let missingDocs = false;

            // Reset des bordures rouges
            ['labelIdCard', 'labelLicense', 'labelProof'].forEach(id => {
                document.getElementById(id).classList.remove('border-error');
            });

            // Ajout des bordures rouges si manquant
            if(!idCard) { document.getElementById('labelIdCard').classList.add('border-error'); missingDocs = true; }
            if(!license) { document.getElementById('labelLicense').classList.add('border-error'); missingDocs = true; }
            if(!proof) { document.getElementById('labelProof').classList.add('border-error'); missingDocs = true; }
            
            if(missingDocs) {
                alert("‚õî Documents manquants !\n\nVous ne pouvez pas envoyer la demande sans joindre :\n1. Carte d'identit√©\n2. Permis de conduire\n3. Justificatif de domicile\n\nLes champs manquants sont indiqu√©s en rouge.");
                return;
            }

            const btn = document.getElementById('submitBtn');
            btn.textContent = "DEMANDE ENVOY√âE !"; 
            btn.style.backgroundColor = "#22c55e"; 
            btn.style.color = "white";
            
            setTimeout(() => { 
                btn.textContent = "CONFIRMER MA DEMANDE"; 
                btn.style.backgroundColor = "white"; 
                btn.style.color = "black"; 
                e.target.reset(); 
                
                ['labelIdCard', 'labelLicense', 'labelProof'].forEach(id => {
                    const l = document.getElementById(id);
                    l.classList.remove('border-green-500', 'bg-green-500/10', 'border-error');
                    l.querySelector('i').style.color = '#9ca3af'; 
                });

                selectedStart=null; selectedEnd=null; 
                renderCalendar(); 
                calculatePrice(); 
                initAutoTime();
            }, 3000);
        }

        window.onload = init;
    </script>
</body>
</html>
